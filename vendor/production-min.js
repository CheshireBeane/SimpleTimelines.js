"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),Timeline=function(){function e(t,i){_classCallCheck(this,e),this.data=i,this.wrapperId=t,this.wrapper=document.getElementById(t),this.slidesWidth=0,this.docWidth=window.innerWidth,this.timelineInner=null,this.nodes=null}return _createClass(e,[{key:"init",value:function(){if(this.data&&(this.data=this.data.sort(this.sortNodesByDate("year")),this.injectHTML(),this.timelineInner=document.querySelector("#"+this.wrapperId+" .timeline"),this.nodes=document.querySelectorAll("#"+this.wrapperId+" .tl-node"),this.checkScreenSize())){this.slidesWidth=200*this.nodes.length;this.slidesWidth,this.docWidth;this.wrapper.addEventListener("mousemove",this.mouseListen.bind(this)),this.initNodeListen()}}},{key:"sortNodesByDate",value:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(i,s){return(i[e]<s[e]?-1:i[e]>s[e]?1:0)*t}}},{key:"injectHTML",value:function(){var e=document.createElement("section");e.classList.add("timeline-wrapper"),this.wrapper.appendChild(e);var t=document.createElement("div");t.classList.add("timeline"),e.appendChild(t);var i=document.createElement("div");i.classList.add("line"),t.appendChild(i);var s=document.createElement("div");s.classList.add("node-wrapper"),t.appendChild(s);for(var n=0;n<this.data.length;n++){var a=document.createElement("div");a.classList.add("tl-node"),s.appendChild(a);var d=document.createElement("p"),l=document.createTextNode(this.data[n].year);d.appendChild(l),a.appendChild(d);var r=document.createElement("div");r.classList.add("dot"),a.appendChild(r);var h=document.createElement("div");h.classList.add("data"),h.classList.add("left-triangle"),a.appendChild(h);var o=document.createElement("div");h.classList.add("upper"),h.appendChild(o);var c=document.createElement("h5"),p=document.createTextNode(this.data[n].year);c.appendChild(p),o.appendChild(c);var u=document.createElement("h3"),m=document.createTextNode(this.data[n].title);u.appendChild(m),o.appendChild(u);var v=document.createElement("img");v.src=this.data[n].image,o.appendChild(v)}}},{key:"initNodeListen",value:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].addEventListener("mouseenter",this.nodeListen)}},{key:"mouseListen",value:function(e){var t=e.pageX,i=100*t/this.docWidth,s=i/100*this.slidesWidth-i/200*this.docWidth;this.timelineInner.style.transform="translate3d("+-s+"px,0,0)"}},{key:"nodeListen",value:function(){var e=this.getBoundingClientRect().left,t=this.children[2];e>window.innerWidth/2?(t.style.left="auto",t.style.right="-20px",t.classList.remove("left-triangle"),t.classList.add("right-triangle")):(t.style.left="-20px",t.style.right="auto",t.classList.add("left-triangle"),t.classList.remove("right-triangle"))}},{key:"checkScreenSize",value:function(){return window.innerWidth>800}}]),e}(),DATA=[{year:"2004",title:"This is a test title",image:"https://picsum.photos/600/400"},{year:"2005",title:"This is a test title 2",image:"https://picsum.photos/600/400"},{year:"1990",title:"This is a test title 3",image:"https://picsum.photos/600/400"},{year:"2018",title:"This is a test title 4",image:"https://picsum.photos/600/400"},{year:"2005",title:"This is a test title 2",image:"https://picsum.photos/600/400"},{year:"1990",title:"This is a test title 3",image:"https://picsum.photos/600/400"},{year:"2018",title:"This is a test title 4",image:"https://picsum.photos/600/400"}];if(document.getElementById("timeline")){var timeline=new Timeline("timeline",DATA);timeline.init()}