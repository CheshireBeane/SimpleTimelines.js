"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Timeline=function(){function e(t,i){_classCallCheck(this,e),this.data=i,this.wrapperId=t,this.wrapper=document.getElementById(t),this.slidesWidth=0,this.docWidth=window.innerWidth,this.timelineInner=null,this.nodes=null}return _createClass(e,[{key:"init",value:function(){if(this.data&&(this.data=this.data.sort(this.sortNodesByDate("year")),this.injectHTML(),this.timelineInner=document.querySelector("#"+this.wrapperId+" .timeline"),this.nodes=document.querySelectorAll("#"+this.wrapperId+" .tl-node"),this.checkScreenSize())){this.slidesWidth=200*this.nodes.length;this.slidesWidth,this.docWidth;this.wrapper.addEventListener("mousemove",this.mouseListen.bind(this)),window.addEventListener("resize",this.windowSizeChange.bind(this)),this.initNodeListen()}}},{key:"sortNodesByDate",value:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(i,n){return(i[e]<n[e]?-1:i[e]>n[e]?1:0)*t}}},{key:"initNodeListen",value:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].addEventListener("mouseenter",this.nodeListen)}},{key:"mouseListen",value:function(e){if(this.checkScreenSize()){var t=e.pageX,i=100*t/this.docWidth,n=i/100*this.slidesWidth-i/200*this.docWidth;this.timelineInner.style.transform="translate3d("+-n+"px,0,0)"}}},{key:"nodeListen",value:function(){var e=this.getBoundingClientRect().left,t=this.children[2];e>window.innerWidth/2?(t.style.left="auto",t.style.right="-20px",t.classList.remove("left-triangle"),t.classList.add("right-triangle")):(t.style.left="-20px",t.style.right="auto",t.classList.add("left-triangle"),t.classList.remove("right-triangle"))}},{key:"windowSizeChange",value:function(){this.checkScreenSize()||(this.timelineInner.style.transform="translate3d(0,0,0)")}},{key:"checkScreenSize",value:function(){return window.innerWidth>800}},{key:"injectHTML",value:function(){var e=document.createElement("section");e.classList.add("timeline-wrapper"),this.wrapper.appendChild(e);var t=document.createElement("div");t.classList.add("timeline"),e.appendChild(t);var i=document.createElement("div");i.classList.add("line"),e.appendChild(i);var n=document.createElement("div");n.classList.add("node-wrapper"),t.appendChild(n);for(var s=0;s<this.data.length;s++){var a=document.createElement("div");a.classList.add("tl-node"),a.innerHTML='\n      <div class="tl-node">\n        <p class="above-year">'+this.data[s].year+'</p>\n        <div class="dot"></div>\n        <div class="data left-triangle" style="left: -20px; right: auto;">\n          <div class="upper">\n            <h5>'+this.data[s].year+"</h5>\n            <h3>"+this.data[s].title+'</h3>\n          </div>\n          <img src="'+this.data[s].image+'" alt="" />\n        </div>\n      </div>',n.appendChild(a)}}}]),e}();