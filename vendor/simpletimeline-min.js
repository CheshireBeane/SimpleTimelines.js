"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),Timeline=function(){function e(t,i){_classCallCheck(this,e),this.data=i,this.wrapperId=t,this.wrapper=document.getElementById(t),this.slidesWidth=0,this.docWidth=window.innerWidth,this.timelineInner=null,this.nodes=null}return _createClass(e,[{key:"init",value:function(){if(this.data&&(this.data=this.data.sort(this.sortNodesByDate("year")),this.injectHTML(),this.timelineInner=document.querySelector("#"+this.wrapperId+" .timeline"),this.nodes=document.querySelectorAll("#"+this.wrapperId+" .tl-node"),this.checkScreenSize())){this.slidesWidth=200*this.nodes.length;this.slidesWidth,this.docWidth;this.wrapper.addEventListener("mousemove",this.mouseListen.bind(this)),window.addEventListener("resize",this.windowSizeChange.bind(this)),this.initNodeListen()}}},{key:"sortNodesByDate",value:function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(i,n){return(i[e]<n[e]?-1:i[e]>n[e]?1:0)*t}}},{key:"initNodeListen",value:function(){for(var e=0;e<this.nodes.length;e++)this.nodes[e].addEventListener("mouseenter",this.nodeListen)}},{key:"mouseListen",value:function(e){if(this.checkScreenSize()){var t=e.pageX,i=100*t/this.docWidth,n=i/100*this.slidesWidth-i/200*this.docWidth;this.timelineInner.style.transform="translate3d("+-n+"px,0,0)"}}},{key:"nodeListen",value:function(){var e=this.getBoundingClientRect().left,t=this.children[2];e>window.innerWidth/2?(t.style.left="auto",t.style.right="-20px",t.classList.remove("left-triangle"),t.classList.add("right-triangle")):(t.style.left="-20px",t.style.right="auto",t.classList.add("left-triangle"),t.classList.remove("right-triangle"))}},{key:"windowSizeChange",value:function(){this.checkScreenSize()||(this.timelineInner.style.transform="translate3d(0,0,0)")}},{key:"checkScreenSize",value:function(){return window.innerWidth>800}},{key:"injectHTML",value:function(){var e=document.createElement("section");e.classList.add("timeline-wrapper"),this.wrapper.appendChild(e);var t=document.createElement("div");t.classList.add("timeline"),e.appendChild(t);var i=document.createElement("div");i.classList.add("line"),e.appendChild(i);var n=document.createElement("div");n.classList.add("node-wrapper"),t.appendChild(n);for(var a=0;a<this.data.length;a++){var d=document.createElement("div");d.classList.add("tl-node"),n.appendChild(d);var s=document.createElement("p");s.classList.add("above-year");var r=document.createTextNode(this.data[a].year);s.appendChild(r),d.appendChild(s);var l=document.createElement("div");l.classList.add("dot"),d.appendChild(l);var c=document.createElement("div");c.classList.add("data"),c.classList.add("left-triangle"),d.appendChild(c);var h=document.createElement("div");h.classList.add("upper"),c.appendChild(h);var o=document.createElement("h5"),u=document.createTextNode(this.data[a].year);o.appendChild(u),h.appendChild(o);var p=document.createElement("h3"),m=document.createTextNode(this.data[a].title);p.appendChild(m),h.appendChild(p);var v=document.createElement("img");v.src=this.data[a].image,c.appendChild(v)}}}]),e}();